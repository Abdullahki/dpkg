language: c
compiler:
  - gcc
matrix:
  include:
  - os: linux
    sudo: required
    dist: trusty
  - os: osx
before_install:
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then sudo apt-get update -qq; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew update; fi
install:
  - if [ "$TRAVIS_OS_NAME" = "linux" ]; then sudo apt-get install -y pkg-config libtool flex autopoint gettext zlib1g-dev libbz2-dev liblzma-dev libselinux1-dev libncursesw5-dev perl libio-string-perl; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew install flex gettext xz gnu-tar perl; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then perlbrew install perl-timedate perl-io-string || true; fi
script:
  - autoreconf -f -i && ./configure && make check
